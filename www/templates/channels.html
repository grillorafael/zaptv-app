<ion-view hide-back-button="true" class="channels-view" view-title="Agora na TV" enable-menu-with-back-views="false">
    <ion-nav-buttons side="right">
        <button class="button button-clear" ng-click="openPopover($event)" ng-cloak>
            <ion-spinner icon="dots" ng-if="isLoading" class="white-spinner"></ion-spinner>
            <i class="icon ion-android-more-horizontal" ng-if="!isLoading"></i>
        </button>
    </ion-nav-buttons>
    <ion-content class="has-header">
        <ion-refresher pulling-text="Carregando programação..." on-refresh="refresh()"></ion-refresher>
        <div class="padding" id="channels-list">
            <div class="row">
                <div class="col col-50">
                    <channel-tile ng-repeat="channel in ::evenChannels track by channel.id"></channel-tile>
                </div>
                <div class="col col-50">
                    <channel-tile ng-repeat="channel in ::oddChannels track by channel.id"></channel-tile>
                </div>
            </div>
        </div>
    </ion-content>
</ion-view>

<script id="channels_popover" type="text/ng-template">
    <ion-popover-view>
        <ion-header-bar>
            <h1 class="title">Menu</h1>
            <button class="button button-clear button-icon ion-ios-close-empty" ng-click='closePopover()'></button>
        </ion-header-bar>
        <ion-content>
            <ion-list>
                <ion-item class="item-icon-left" ng-click="goToProfile()">
                    <i class="icon ion-person"></i> Meu Perfil
                </ion-item>
                <ion-item class="item-icon-left" ng-click="refresh()">
                    <i class="icon ion-refresh"></i> Atualizar
                </ion-item>
                <ion-item class="item-icon-left" ng-click="logout()">
                    <i class="icon ion-log-out"></i> Sair
                </ion-item>
            </ion-list>
        </ion-content>
    </ion-popover-view>
</script>
